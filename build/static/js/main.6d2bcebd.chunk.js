(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{26:function(e,t,a){e.exports=a(42)},42:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),l=a.n(c),o=a(6),s=a(7),i=a(10),u=a(8),m=a(11),d=function(e){var t=e.title;return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-light bg-primary"},r.a.createElement("a",{className:"navbar-brand",href:"/"},t)))};function v(e){return{type:"BUY",item:e}}var f=a(4),h=a(9);var p=Object(f.b)(function(e,t){return{cart:e.cart}},function(e){var t={buy:v};return{actions:Object(h.bindActionCreators)(t,e)}})(function(e){var t=e.cart;return r.a.createElement("div",null,r.a.createElement("div",{className:"card card-default"}),r.a.createElement("div",{className:"card-header"},"Items in cart"),r.a.createElement("div",{className:"card-body"},r.a.createElement("table",{className:"table table-bordred table-sm"},r.a.createElement("tbody",null,function(e,t){return e.map(function(e,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,e.name),r.a.createElement("td",null,"\u20b9",e.price),r.a.createElement("td",null,1),r.a.createElement("td",null,"\u20b9",1*e.price),r.a.createElement("td",null,r.a.createElement("span",{className:"badge badge-primary",onClick:function(a){return function(e,t){t.actions.buy(e)}(e,t)}},r.a.createElement("i",{className:"fa fa-plus"}))),r.a.createElement("td",null,r.a.createElement("span",{className:"badge badge-primary"},r.a.createElement("i",{className:"fa fa-minus"}))))})}(t,e))),r.a.createElement("hr",null),r.a.createElement("button",{className:"btn btn-primary"},"checkout")))}),E=a(45),b=a(44),g=a(47),y=a(46),w=function(e){return r.a.createElement("div",{className:"jumbotron"},r.a.createElement("h1",{className:"display-4"},"welcome to shopIT!"),r.a.createElement("hr",{className:"my-4"}),r.a.createElement("a",{className:"btn btn-primary btn-lg",href:"/",role:"button"},"Learn React"))},O=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.cart;return r.a.createElement("div",null,r.a.createElement("i",{className:"fa fa-shopping-cart"})," \xa0",r.a.createElement("span",{className:"badge badge-primary"},e.length)," item(s) in cart")}}]),t}(n.Component);var N=Object(f.b)(function(e){return{cart:e.cart}},null)(O),j="NETWORK_REQUEST_BEGIN",k="NETWORK_REQUEST_SUCCESS",C="LOAD_PRODUCTS_SUCCESS",R="LOAD_REVIEWS_SUCCESS",S="LOAD_FEATURES_SUCCESS",T="SUBMIT_NEW_REVIEW",F="BUY";a(36);var I=function(e){var t=e.review;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"alert alert-info"},r.a.createElement("span",{style:{color:"red"}},function(e){for(var t=[],a=0;a<e;a++)t.push(r.a.createElement("i",{className:"fa fa-star",key:a}));return t}(t.stars))," \u2014 ",t.author,r.a.createElement("hr",null),r.a.createElement("p",null,t.body))))},_=a(12),U=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={isFormOpen:!1,stars:5,author:"nag@email.com",body:""},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"toggleForm",value:function(){var e=this.state.isFormOpen;this.setState({isFormOpen:!e})}},{key:"handleChange",value:function(e){var t=e.target.id,a=e.target.value;this.setState(Object(_.a)({},t,a))}},{key:"handleForm",value:function(e){e.preventDefault();var t=this.state,a={stars:t.stars,author:t.author,body:t.body};(0,this.props.onNewReview)(a),this.toggleForm()}},{key:"isValidForm",value:function(){return this.state.stars<4}},{key:"renderForm",value:function(){var e=this,t=this.state,a=t.isFormOpen,n=t.stars,c=t.author,l=t.body;return a?r.a.createElement("div",{className:"card card-default"},r.a.createElement("div",{className:"card-header"},"Review Form"),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:function(t){return e.handleForm(t)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"stars"),r.a.createElement("select",{className:"form-control",id:"stars",value:n,onChange:function(t){return e.handleChange(t)}},[1,2,3,4,5].map(function(e,t){return r.a.createElement("option",{key:t},e)})),r.a.createElement("span",{className:"text text-danger"},n<4?"please give more stars":null)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"author"),r.a.createElement("input",{className:"form-control",id:"author",value:c,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"body"),r.a.createElement("textarea",{className:"form-control",id:"body",value:l,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("button",{className:"btn btn-dark",disabled:this.isValidForm()},"submit"),"\xa0",r.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:function(t){return e.toggleForm()}},"cancel")))):r.a.createElement("button",{className:"btn btn-info",onClick:function(t){return e.toggleForm()}},r.a.createElement("i",{className:"fa fa-plus"}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-sm-10 col-md-10"},this.renderForm()))}}]),t}(n.Component);function W(e){return function(t){var a="http://localhost:4003/v1/products/".concat(e,"/reviews");fetch(a).then(function(e){return e.json()}).then(function(a){var n=a.reviews;t({type:R,reviews:n,productId:e})})}}function A(e,t){return function(a){var n="http://localhost:4003/v1/products/".concat(t,"/reviews");fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){var n=e.reviews;a({type:T,newReview:n,productId:t})})}}var B=function(e){function t(e){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.productId;this.props.loadFeatures(e)}},{key:"render",value:function(){var e=this.props.features;return console.log(e),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-sm-10 col-md-10"},r.a.createElement("div",{className:"alert alert-info"},r.a.createElement("h4",null,"Highlights"),r.a.createElement("hr",null),e.length>0&&e[0].specifications?r.a.createElement("ol",null,e[0].specifications.map(function(e){return r.a.createElement("li",null,e.detail)})):r.a.createElement("ul",null,r.a.createElement("li",null,"Specifications to be defined")))))}}]),t}(n.Component);var D=Object(f.b)(function(e,t){var a=t.productId;return{features:e.features[a]||[]}},function(e){return{loadFeatures:function(t){e(function(e){return function(t){t({type:j,message:"Loading features"});var a="http://localhost:4003/v1/products/".concat(e,"/features");fetch(a).then(function(e){return e.json()}).then(function(a){var n=a.features;t({type:S,features:n,productId:e})}).catch(function(e){t({type:"NETWORK_REQUEST_FAILED",message:"Oops, not able to  api server"})})}}(t))}}})(B),L=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={tab:1},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"addNewReview",value:function(e){var t=this.props.value;this.props.actions.submitNewReview(e,t.id)}},{key:"changeTab",value:function(e,t){var a=this;t.preventDefault(),this.setState({tab:e},function(){if(3===e){var t=a.props.value;a.props.actions.loadReviews(t.id)}})}},{key:"handleBuy",value:function(){var e=this.props.value;this.props.actions.buy(e)}},{key:"renderBuyBtn",value:function(e){var t=this;return e.canBuy?r.a.createElement("button",{onClick:function(e){return t.handleBuy()},className:"btn btn-sm btn-primary"},"buy"):null}},{key:"renderReviews",value:function(){return this.props.reviews.map(function(e,t){return r.a.createElement(I,{review:e,key:t})})}},{key:"renderTabPanel",value:function(e){var t=this;switch(this.state.tab){case 1:return r.a.createElement("div",null,r.a.createElement("hr",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-sm-10 col-md-10"},r.a.createElement("div",{className:"alert alert-info"},e.description))));case 2:return r.a.createElement("div",null,r.a.createElement("hr",null),r.a.createElement(D,{productId:e.id}));case 3:return r.a.createElement("div",null,r.a.createElement("hr",null),this.renderReviews(),r.a.createElement("hr",null),r.a.createElement(U,{onNewReview:function(e){return t.addNewReview(e)}}));default:return null}}},{key:"render",value:function(){var e=this.props.value;this.state.tab;return r.a.createElement("div",null,r.a.createElement("div",{className:"list-group-item"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-9 col-sm-9 col-md-9"},r.a.createElement("h5",null,e.firstName),r.a.createElement("h6",null,e.lastName),r.a.createElement("h7",null,e.email),this.renderBuyBtn(e),r.a.createElement("hr",null),this.renderTabPanel(e)))))}}]),t}(n.Component);var P=Object(f.b)(function(e,t){var a=t.value;return{reviews:e.reviews[a.id]||[]}},function(e){var t={loadReviews:W,submitNewReview:A,buy:v};return{actions:Object(h.bindActionCreators)(t,e)}})(L),x=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.loadProducts()}},{key:"renderProducts",value:function(){return this.props.products.map(function(e,t){return r.a.createElement(P,{value:e,key:t})})}},{key:"render",value:function(){return r.a.createElement("div",null,this.renderProducts())}}]),t}(n.Component);var K=Object(f.b)(function(e){return{products:e.products}},function(e){return{loadProducts:function(){e(function(e){e({type:j,message:"Loading customers"}),fetch("https://igurukul-njcms.herokuapp.com/v1/customers").then(function(e){return e.json()}).then(function(t){var a=t.customers;setTimeout(function(){e({type:k,message:""}),e({type:C,customers:a})},2e3)}).catch(function(t){e({type:"NETWORK_REQUEST_FAILED",message:"Oops, not able to  api server"})})})}}})(x),Q=function(e){var t=e.location;return r.a.createElement("div",null,r.a.createElement("h3",null,"No match for ",r.a.createElement("code",null,t.pathname)))},V=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement(E.a,null,r.a.createElement("div",null,r.a.createElement(d,{title:"online-shopping"}),r.a.createElement("hr",null),r.a.createElement(N,null),r.a.createElement("hr",null),r.a.createElement("ul",{className:"nav nav-pills"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(b.a,{className:"nav-link",to:"products"},"View Customers"))),r.a.createElement("hr",null),r.a.createElement("div",{className:"alert alert-info"},this.props.status.message),r.a.createElement(g.a,null,r.a.createElement(y.a,{path:"/",exact:!0,component:w}),r.a.createElement(y.a,{path:"/products",component:K}),r.a.createElement(y.a,{path:"/cart",render:function(){return r.a.createElement(p,null)}}),r.a.createElement(y.a,{exact:!0,component:Q})))))}}]),t}(n.Component);var M=Object(f.b)(function(e){return{status:e.status}},null)(V),J=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Y(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}a(38),a(40);var G=a(23),H=a(13);var $=a(24);var q=Object(h.combineReducers)({products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(console.log("state: ",e),t.type){case C:return Object(H.a)(t.customers);default:return e}},reviews:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=t.productId;switch(t.type){case R:var n=t.productId,r=t.reviews,c=Object(H.a)(r);return Object.assign({},e,Object(_.a)({},n,c));case T:var l=t.newReview,o=Object(H.a)(l);return Object.assign({},e,Object(_.a)({},a,o));default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return Object(H.a)(e).concat([t.item]);default:return e}},status:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:case k:case"NETWORK_REQUEST_FAILED":return Object($.a)({},e,t);default:return e}},features:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(console.log("state: ",e),t.type){case S:var a=t.productId,n=t.features,r=Object(H.a)(n);return Object.assign({},e,Object(_.a)({},a,r));default:return e}}}),z=a(25),X=[G.a],Z=Object(z.composeWithDevTools)({}),ee=Object(h.createStore)(q,{products:[],features:[],reviews:{},cart:[],status:{}},Z(h.applyMiddleware.apply(void 0,X)));l.a.render(r.a.createElement(f.a,{store:ee},r.a.createElement(M,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");J?(function(e,t){fetch(e).then(function(a){404===a.status||-1===a.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Y(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):Y(t,e)})}}()}},[[26,2,1]]]);
//# sourceMappingURL=main.6d2bcebd.chunk.js.map